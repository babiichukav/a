;
(self.AMP=self.AMP||[]).push({m:1,v:"2202230359001",n:"amp-youtube",ev:"0.1",l:!0,f:function(t,i){(()=>{function i(t,i){(null==i||i>t.length)&&(i=t.length);for(var n=0,e=new Array(i);n<i;n++)e[n]=t[n];return e}function n(t,n){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(e)return(e=e.call(t)).next.bind(e);if(Array.isArray(t)||(e=function(t,n){if(t){if("string"==typeof t)return i(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?i(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var s=0;return function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var e;function s(){return e||(e=Promise.resolve(void 0))}var o=class{constructor(){this.promise=new Promise(((t,i)=>{this.resolve=t,this.reject=i}))}};function r(t){return new Promise((i=>{i(t())}))}var{isArray:a}=Array;function l(t){return a(t)?t:[t]}var{hasOwnProperty:h,toString:u}=Object.prototype;function c(t){return"[object Object]"===u.call(t)}function d(t){const i=Object.create(null);return t&&Object.assign(i,t),i}function f(t){return"number"==typeof t&&isFinite(t)}function m(t,i,n,e,s,o,r,a,l,h,u){return t}function p(t,i){try{return function(t){return JSON.parse(t)}(t)}catch(t){return null==i||i(t),null}}function v(t){return(t.ownerDocument||t).defaultView}var _,g,y={bubbles:!0,cancelable:!0};function P(t){var i;null===(i=t.parentElement)||void 0===i||i.removeChild(t)}function A(t,i,n,e){const s=n||{};m(t.ownerDocument);const o=t.ownerDocument.createEvent("Event");o.data=s;const{bubbles:r,cancelable:a}=e||y;o.initEvent(i,r,a),t.dispatchEvent(o)}function b(t,i){t.classList.add("i-amphtml-fill-content"),i&&t.classList.add("i-amphtml-replaced-content")}function w(t,i,e,s){for(var o,r=n(l(t),!0);!(o=r()).done;){const t=o.value,n=i.getAttribute(t);null!==n?e.setAttribute(t,n):s&&e.removeAttribute(t)}}function M(t){const i=t.ownerDocument||t;return _&&_.ownerDocument===i||(_=i.createElement("div")),E}function E(t){return function(t,i){m(1===i.length),t.innerHTML=i[0];const n=t.firstElementChild;return m(n),m(!n.nextElementSibling),t.removeChild(n),n}(_,t)}function I(t){const i=Object.getOwnPropertyDescriptor(t,"message");if(null!=i&&i.writable)return t;const{message:n,stack:e}=t,s=new Error(n);for(const i in t)s[i]=t[i];return s.stack=e,s}function R(t){let i=null,e="";for(var s,o=n(arguments,!0);!(s=o()).done;){const t=s.value;t instanceof Error&&!i?i=I(t):(e&&(e+=" "),e+=t)}return i?e&&(i.message=e+": "+i.message):i=new Error(e),i}function T(t){var i,n;null===(i=(n=self).__AMP_REPORT_ERROR)||void 0===i||i.call(n,t)}function V(t,...i){try{return t.apply(null,i)}catch(t){!function(t){const i=R.apply(null,arguments);setTimeout((()=>{throw T(i),i}))}(t)}}function k(t){const i=R.apply(null,arguments);return i.expected=!0,i}function S(t,...i){T(k.apply(null,i))}var C=["Webkit","webkit","Moz","moz","ms","O","o"],x={"getPropertyPriority":()=>"","getPropertyValue":()=>""};function q(t,i,n,e,s){const o=function(t,i,n){if(i.startsWith("--"))return i;g||(g=d());let e=g[i];if(!e||n){if(e=i,void 0===t[i]){const n=function(t){return t.charAt(0).toUpperCase()+t.slice(1)}(i),s=function(t,i){for(let n=0;n<C.length;n++){const e=C[n]+i;if(void 0!==t[e])return e}return""}(t,n);void 0!==t[s]&&(e=s)}n||(g[i]=e)}return e}(t.style,i,s);if(!o)return;const r=e?n+e:n;t.style.setProperty(function(t){const i=t.replace(/[A-Z]/g,(t=>"-"+t.toLowerCase()));return C.some((t=>i.startsWith(t+"-")))?`-${i}`:i}(o),r)}function O(t,i){for(const n in i)q(t,n,i[n])}var $=/vertical/,j=new WeakMap,F=new WeakMap,U=new WeakMap;function z(t){let i=j.get(t);return i||(i=new t.ResizeObserver(Y),j.set(t,i)),i}function Y(t){const i=new Set;for(let n=t.length-1;n>=0;n--){const e=t[n],{target:s}=e;if(i.has(s))continue;i.add(s);const o=F.get(s);if(o){U.set(s,e);for(let t=0;t<o.length;t++){const{callback:i,type:n}=o[t];D(n,i,e)}}}}function D(t,i,n){if(0==t){const{contentRect:t}=n,{height:e,width:s}=t;V(i,{width:s,height:e})}else if(1==t){const{borderBoxSize:t}=n;let e;if(t)e=t.length>0?t[0]:{inlineSize:0,blockSize:0};else{const{target:t}=n,i=v(t),s=$.test(function(t,i){return t.getComputedStyle(i)||x}(i,t).writingMode),{offsetHeight:o,offsetWidth:r}=t;let a,l;s?(l=r,a=o):(a=r,l=o),e={inlineSize:a,blockSize:l}}V(i,e)}}var N=self.AMP_CONFIG||{},L=("string"==typeof N.thirdPartyFrameRegex?new RegExp(N.thirdPartyFrameRegex):N.thirdPartyFrameRegex,("string"==typeof N.cdnProxyRegex?new RegExp(N.cdnProxyRegex):N.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/);function W(t){if(!self.document||!self.document.head)return null;if(self.location&&L.test(self.location.origin))return null;const i=self.document.head.querySelector(`meta[name="${t}"]`);return i&&i.getAttribute("content")||null}function B(t){let i=!1,n=null,e=t;return(...t)=>(i||(n=e.apply(self,t),i=!0,e=null),n)}N.thirdPartyUrl,N.thirdPartyFrameHost,N.cdnUrl||W("runtime-host"),N.errorReportingUrl,N.betaErrorReportingUrl,N.localDev,N.geoApiUrl||W("amp-geo-api"),self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var J=self.__AMP_LOG;function H(t){return J.user||(J.user=Z()),function(t,i){return i&&i.ownerDocument.defaultView!=t}(J.user.win,t)?J.userForEmbed||(J.userForEmbed=Z()):J.user}function Z(t){return function(t,i){throw new Error("failed to call initLogConstructor")}()}function G(t,i,n,e,s,o,r,a,l,h,u){return t}function K(t,i,n,e,s,o,r,a,l,h,u){return H().assert(t,i,n,e,s,o,r,a,l,h,u)}function Q(t,i){return et(t=function(t){return t.__AMP_TOP||(t.__AMP_TOP=t)}(t),i)}function X(t,i){return et(nt(it(t)),i)}function tt(t,i){const n=nt(it(t));return ot(n,i)?et(n,i):null}function it(t){return t.nodeType?(i=v(t),Q(i,"ampdoc")).getAmpDoc(t):t;var i}function nt(t){const i=it(t);return i.isSingleDoc()?i.win:i}function et(t,i){G(ot(t,i));const n=st(t)[i];return n.obj||(G(n.ctor),G(n.context),n.obj=new n.ctor(n.context),G(n.obj),n.context=null,n.resolve&&n.resolve(n.obj)),n.obj}function st(t){let i=t.__AMP_SERVICES;return i||(i=t.__AMP_SERVICES={}),i}function ot(t,i){const n=t.__AMP_SERVICES&&t.__AMP_SERVICES[i];return!(!n||!n.ctor)}var rt,at,lt,ht=t=>tt(t,"action"),ut=t=>Q(t,"platform"),ct=t=>et(t,"timer"),dt=t=>tt(t,"url"),ft=t=>X(t,"viewport");function mt(t,i,n={}){const{needsRootBounds:e,threshold:s}=n,o=function(t){return t.parent&&t.parent!=t}(i)&&e?i.document:void 0;return new i.IntersectionObserver(t,{threshold:s,root:o})}function pt(t){var i;let n=null===(i=rt)||void 0===i?void 0:i.get(t);if(!n){const i=function(t){rt||(rt=new WeakMap,at=new WeakMap),m(at);let i=at.get(t);return i||(i=mt((t=>{const n=new Set;for(let s=t.length-1;s>=0;s--){var e;const{target:o}=t[s];n.has(o)||(n.add(o),m(i),i.unobserve(o),m(rt),null===(e=rt.get(o))||void 0===e||e.resolve(t[s]),rt.delete(o))}}),t,{needsRootBounds:!0}),at.set(t,i)),i}(v(t));m(rt),i.observe(t),n=new o,rt.set(t,n)}return n.promise}function vt(t){return null==t.__AMP_AUTOPLAY&&(t.__AMP_AUTOPLAY=function(t){const i=t.document.createElement("video");var n;return i.setAttribute("muted",""),i.setAttribute("playsinline",""),i.setAttribute("webkit-playsinline",""),i.setAttribute("height","0"),i.setAttribute("width","0"),i.muted=!0,i.playsInline=!0,i.playsinline=!0,i.webkitPlaysinline=!0,O(i,{position:"fixed",top:"0",width:"0",height:"0",opacity:"0"}),n=i,r((()=>n.play())).catch((()=>{})),Promise.resolve(!i.paused)}(t)),t.__AMP_AUTOPLAY}function _t(t){return t.querySelector("video, iframe")}function gt(t,i){const n=r((()=>t.play(!!i)));return n.catch((t=>{S(0,t)})),n}function yt(t,i,n,e){let s=t,o=n,r=t=>{try{return o(t)}catch(t){var i,n;throw null===(i=(n=self).__AMP_REPORT_ERROR)||void 0===i||i.call(n,t),t}};const a=function(){if(void 0!==lt)return lt;lt=!1;try{const t={get capture(){return lt=!0,!1}};self.addEventListener("test-options",null,t),self.removeEventListener("test-options",null,t)}catch(t){}return lt}(),l=!(null==e||!e.capture);return s.addEventListener(i,r,a?e:l),()=>{null==s||s.removeEventListener(i,r,a?e:l),o=null,s=null,r=null}}function Pt(t,i,n,e){const s={detail:n};return Object.assign(s,e),new t.CustomEvent(i,s)}function At(t,i,n,e){return yt(t,i,n,e)}function bt(t){return t.data}new WeakMap,new WeakMap;var wt=class{constructor(){this.Yv=!1,this.Jv=new class{constructor(){this.Fn=null}add(t){return this.Fn||(this.Fn=[]),this.Fn.push(t),()=>{this.remove(t)}}remove(t){this.Fn&&function(t,i){const n=t.indexOf(i);-1!=n&&t.splice(n,1)}(this.Fn,t)}removeAll(){this.Fn&&(this.Fn.length=0)}fire(t){if(this.Fn)for(var i,e=n(this.Fn,!0);!(i=e()).done;)(0,i.value)(t)}getHandlerCount(){var t,i;return null!==(t=null===(i=this.Fn)||void 0===i?void 0:i.length)&&void 0!==t?t:0}}}onSessionEnd(t){this.Jv.add(t)}beginSession(){this.Yv=!0}endSession(){this.Yv&&this.Jv.fire(),this.Yv=!1}isSessionActive(){return this.Yv}},Mt=['<button aria-label="Unmute video" class="i-amphtml-video-mask i-amphtml-fill-content" tabindex=0></button>'],Et=["<i-amphtml-video-icon class=amp-video-eq><div class=amp-video-eq-col><div class=amp-video-eq-filler></div><div class=amp-video-eq-filler></div></div></i-amphtml-video-icon>"];function It(t,i,n){if(i[n])return i[n];const e=t.querySelector(`style[${n}], link[${n}]`);return e?(i[n]=e,e):null}function Rt(t,i){const n=t.styleSheets;for(let t=0;t<n.length;t++)if(n[t].ownerNode==i)return!0;return!1}var Tt={"title":"","artist":"","album":"","artwork":[{"src":""}]},Vt="registered",kt="load",St="playing",Ct="pause",xt="ended",qt="muted",Ot="unmuted",$t="ad_start",jt="ad_end",Ft="playing_manual",Ut="paused",zt="video-play",Yt="user-interacted";function Dt(t){t.signals().signal(Yt)}var Nt="video-manager",Lt=(t,i)=>!!t&&(t.video===i||t.video.element===i);function Wt(t,i){const n=i.top+i.height/2,e=t.getSize().height/2;return Math.abs(n-e)}function Bt(t){return 10*t*5}var Jt=t=>!!t&&!isNaN(t)&&t>1;function Ht(t,i,n){const{video:e}=t;t.getAnalyticsDetails().then((t=>{n&&Object.assign(t,n),A(e.element,i,t)}))}function Zt(t){!function(t,i,n,e){const o=it(t),r=nt(o);!function(t,i,n,e,s,o){const r=st(t);let a=r[n];a||(a=r[n]={obj:null,promise:null,resolve:null,reject:null,context:null,ctor:null,sharedInstance:!1}),a.ctor||(a.ctor=e,a.context=i,a.sharedInstance=!1,a.resolve&&et(t,n))}(r,o,i,class{constructor(t){this.ampdoc=t,this.installAutoplayStyles=B((()=>function(t){!function(t,i,n,e,s){const o=t.getHeadNode(),r=function(t,i,n,e){let s=t.__AMP_CSS_SM;s||(s=t.__AMP_CSS_SM=d());const o=!n&&e&&"amp-custom"!=e&&"amp-keyframes"!=e,r=n?"amp-runtime":o?`amp-extension=${e}`:null;if(r){const n=It(t,s,r);if(n)return"STYLE"==n.tagName&&n.textContent!==i&&(n.textContent=i),n}const a=(t.ownerDocument||t).createElement("style");a.textContent=i;let l=null;return n?a.setAttribute("amp-runtime",""):o?(a.setAttribute("amp-extension",e||""),l=It(t,s,"amp-runtime")):(e&&a.setAttribute(e,""),l=t.lastChild),function(t,i,n=null){if(!n)return void function(t,i){t.insertBefore(i,t.firstChild)}(t,i);const e=n.nextSibling;t.insertBefore(i,e)}(t,a,l),r&&(s[r]=a),a}(o,function(t,i){const n=t.__AMP_CSS_TR;return n?n(i):i}(o,i),e||!1,s||null);if(n){const i=t.getRootNode();if(Rt(i,r))return n(r),r;const e=setInterval((()=>{Rt(i,r)&&(clearInterval(e),n(r))}),4)}}(t,".i-amphtml-video-mask{display:block;z-index:1;-webkit-appearance:none;appearance:none;background:transparent;border:none}.amp-video-eq{display:none}.i-amphtml-video-interface:not(amp-video) .amp-video-eq,amp-story .amp-video-eq,amp-video[controls] .amp-video-eq{display:-ms-flexbox;display:flex}[noaudio] .amp-video-eq{display:none!important}.amp-video-eq{pointer-events:none!important;-ms-flex-align:end;align-items:flex-end;bottom:7px;height:12px;opacity:0.8;overflow:hidden;position:absolute;right:7px;width:20px;z-index:1}.amp-video-eq-col{-ms-flex:1;flex:1;height:100%;margin-right:1px;position:relative}.amp-video-eq-col div{animation-name:amp-video-eq-animation;animation-timing-function:linear;animation-iteration-count:infinite;animation-direction:alternate;background-color:#fafafa;height:100%;position:absolute;width:100%;will-change:transform;animation-play-state:paused}.amp-video-eq-play .amp-video-eq-col div{animation-play-state:running}.amp-video-eq-1-1{animation-duration:0.3s;transform:translateY(60%)}.amp-video-eq-1-2{animation-duration:0.45s;transform:translateY(60%)}.amp-video-eq-2-1{animation-duration:0.5s;transform:translateY(30%)}.amp-video-eq-2-2{animation-duration:0.4s;transform:translateY(30%)}.amp-video-eq-3-1{animation-duration:0.3s;transform:translateY(70%)}.amp-video-eq-3-2{animation-duration:0.35s;transform:translateY(70%)}.amp-video-eq-4-1{animation-duration:0.4s;transform:translateY(50%)}.amp-video-eq-4-2{animation-duration:0.25s;transform:translateY(50%)}@keyframes amp-video-eq-animation{0%{transform:translateY(100%)}to{transform:translateY(0)}}\n/*# sourceURL=/css/video-autoplay.css*/",null,!1,"amp-video-autoplay")}(this.ampdoc))),this.Hv=null,this.Zv=null,this.Xv=null,this.Tr=ct(t.win),this.Kv=ht(t.getHeadNode()),this.Qv=()=>this.v_(),this.__=B((()=>new class{constructor(t,i){this.g_=i,this.xi=t,this.y_=null,this.P_=null,this.Hv=[],this.A_=[],this.b_=()=>this.w_(),this.M_=t=>this.R_(t)==Ft,this.I_=(t,i)=>this.E_(t,i),this.T_(),this.V_()}dispose(){this.A_.forEach((t=>t())),this.A_.length=0}register(t){const{video:i}=t,{element:n}=i;this.k_(n)&&(this.Hv.push(i),At(n,Ct,this.b_),At(n,St,this.b_),At(n,xt,this.b_),i.signals().whenSignal(Yt).then(this.b_),this.w_())}V_(){const t=this.xi.getRootNode(),i=()=>this.j_();this.A_.push(At(t,"webkitfullscreenchange",i),At(t,"mozfullscreenchange",i),At(t,"fullscreenchange",i),At(t,"MSFullscreenChange",i))}isInLandscape(){return(t=this.xi.win).screen&&"orientation"in t.screen?t.screen.orientation.type.startsWith("landscape"):90==Math.abs(t.orientation);var t}k_(t){if("video"==_t(t).tagName.toLowerCase())return!0;const i=ut(this.xi.win);return!i.isIos()&&!i.isSafari()||function(t){return!!{"amp-dailymotion":!0,"amp-ima-video":!0}[t.tagName.toLowerCase()]}(t)}j_(){this.y_=null}T_(){const{win:t}=this.xi,{screen:i}=t;if(i&&"orientation"in i){const t=i.orientation;this.A_.push(At(t,"change",(()=>this.C_())))}this.A_.push(At(t,"orientationchange",(()=>this.C_())))}C_(){this.isInLandscape()?null!=this.P_&&this.S_(this.P_):this.y_&&this.O_(this.y_)}S_(t){const i=ut(this.xi.win);this.y_=t,i.isAndroid()&&i.isChrome()?t.fullscreenEnter():this.x_(t).then((()=>t.fullscreenEnter()))}O_(t){this.y_=null,this.x_(t,"center").then((()=>t.fullscreenExit()))}x_(t,i=null){const{element:n}=t,e=this.q_();return this.F_().then((()=>pt(n))).then((({boundingClientRect:t})=>{const{bottom:o,top:r}=t,a=e.getSize().height;if(r>=0&&o<=a)return s();const l=i||(o>a?"bottom":"top");return e.animateScrollIntoView(n,l)}))}q_(){return ft(this.xi)}F_(){return ct(this.xi.win).promise(330)}w_(){if(this.isInLandscape())return Promise.resolve(this.P_);this.P_=null;const t=this.Hv.filter(this.M_).map((t=>pt(t.element)));return Promise.all(t).then((t=>{const i=t.sort(this.I_)[0];return i&&i.intersectionRatio>.5?i.target.getImpl().then((t=>this.P_=t)):this.P_}))}E_(t,i){const{boundingClientRect:n,intersectionRatio:e}=t,{boundingClientRect:s,intersectionRatio:o}=i,r=e-o;if(Math.abs(r)>.1)return r;const a=ft(this.xi),l=Wt(a,n),h=Wt(a,s);return l<h||l>h?l-h:n.top-s.top}R_(t){return this.g_.getPlayingState(t)}}(this.ampdoc,this))),this.Tr.delay(this.Qv,1e3)}dispose(){if(this.__().dispose(),this.Zv.disconnect(),this.Zv=null,this.Hv)for(let t=0;t<this.Hv.length;t++)this.Hv[t].dispose()}v_(){for(let t=0;t<this.Hv.length;t++){const i=this.Hv[t];i.getPlayingState()!==Ut&&(Ht(i,"video-seconds-played"),this.z_(i))}this.Tr.delay(this.Qv,1e3)}z_(t){const i="timeUpdate",n=t.video.getCurrentTime(),e=t.video.getDuration();if(f(n)&&f(e)&&e>0){const s=n/e,o=Pt(this.ampdoc.win,`${Nt}.${i}`,{"time":n,"percent":s});this.Kv.trigger(t.video.element,i,o,1)}}register(t){G(t);const i=t;if(this.L_(t),!t.supportsPlatform())return;if(this.U_(t))return;if(!this.Zv){const t=t=>t.forEach((({isIntersecting:t,target:i})=>{this.Y_(i).updateVisibility(t)}));this.Zv=mt(t,this.ampdoc.win,{threshold:.5})}this.Zv.observe(i.element),At(i.element,"reloaded",(()=>n.videoLoaded())),this.Hv=this.Hv||[];const n=new class{constructor(t,i){this.g_=t,this.xi=t.ampdoc,this.video=i,this.W_=!0,this.D_=!1,this.gn=!1,this.N_=!1,this.Zi=!1,this.B_=new wt,this.B_.onSessionEnd((()=>Ht(this,"video-session"))),this.J_=new wt,this.J_.onSessionEnd((()=>Ht(this,"video-session-visible"))),this.H_=B((()=>new class{constructor(t,i){this.Tr=ct(t),this.Z_=i,this.A_=null,this.G_=0,this.X_=0}start(){const{element:t}=this.Z_.video;this.stop(),this.A_=this.A_||[],this.K_()?this.Q_(this.X_):this.A_.push(function(t,i,n,e){let s=n;const o=yt(t,"loadedmetadata",(t=>{try{s(t)}finally{s=null,o()}}),void 0);return o}(t,0,(()=>{this.K_()&&this.Q_(this.X_)}))),this.A_.push(At(t,xt,(()=>{this.K_()&&this.tg(100)})))}stop(){if(this.A_){for(;this.A_.length>0;)this.A_.pop()();this.X_++}}K_(){const{video:t}=this.Z_,i=t.getDuration();if(!Jt(i))return!1;if(Bt(i)<250){const i=Math.ceil(5);this.ig("This video is too short for `video-percentage-played`. Reports may be innacurate. For best results, use videos over",i,"seconds long.",t.element)}return!0}ig(...t){H().warn.apply(H(),[Nt].concat(t))}Q_(t){if(t!=this.X_)return;const{Z_:i,Tr:n}=this,{video:e}=i,s=()=>this.Q_(t);if(i.getPlayingState()==Ut)return void n.delay(s,500);const o=e.getDuration();if(!Jt(o))return void n.delay(s,500);const r=(h=Bt(o),m(!0),Math.min(Math.max(h,250),4e3)),a=e.getCurrentTime()/o*100,l=5*Math.floor(a/5);var h;G(f(l)),this.tg(l),n.delay(s,r)}tg(t){t<=0||this.G_!=t&&(this.G_=t,this.ng(t))}ng(t){Ht(this.Z_,"video-percentage-played",{"normalizedPercentage":t.toString()})}}(this.xi.win,this))),this.eg=!1,this.sg=!1,this.og=null,this.Z=!1,this.rg=!1,this.hasAutoplay=i.element.hasAttribute("autoplay"),this.hasAutoplay&&this.g_.installAutoplayStyles(),this.ag=Tt,this.lg=()=>{gt(this.video,!1)},this.ug=()=>{this.video.pause()},At(i.element,kt,(()=>this.videoLoaded())),At(i.element,Ct,(()=>this.hg())),At(i.element,"play",(()=>{this.rg=!0,Ht(this,zt)})),At(i.element,St,(()=>this.cg())),At(i.element,qt,(()=>this.Z=!0)),At(i.element,Ot,(()=>{this.Z=!1,this.g_.pauseOtherVideos(this)})),At(i.element,"amp:video:tick",(t=>{const i=bt(t),n=i.eventType;n&&this.dg(n,i.vars)})),At(i.element,xt,(()=>{this.N_=!1,Ht(this,"video-ended")})),At(i.element,$t,(()=>{this.N_=!0,Ht(this,"video-ad-start")})),At(i.element,jt,(()=>{this.N_=!1,Ht(this,"video-ad-end")})),i.signals().whenSignal(Vt).then((()=>this.fg())),this.mg=B((()=>{const t="firstPlay",i=Pt(this.xi.win,t,{}),{element:n}=this.video;ht(n).trigger(n,t,i,1)})),this.pg()}dispose(){this.H_().stop()}dg(t,i){const n={"__amp:eventType":t};Object.keys(i).forEach((t=>{n[`custom_${t}`]=i[t]})),Ht(this,"video-hosted-custom",n)}pg(){this.video.signals().whenSignal("playback-delegated").then((()=>{this.W_=!1,this.gn&&this.video.pause()}))}isMuted(){return this.Z}isPlaybackManaged(){return this.W_}fg(){this.vg()&&this.g_.registerForAutoFullscreen(this),this.hasAutoplay&&this._g()}vg(){const{element:t}=this.video;return!(this.video.preimplementsAutoFullscreen()||!t.hasAttribute("rotate-to-fullscreen"))&&K(this.video.isInteractive(),"Only interactive videos are allowed to enter fullscreen on rotate. Set the `controls` attribute on %s to enable.",t)}cg(){this.gn=!0,this.getPlayingState()==Ft&&(this.mg(),this.g_.pauseOtherVideos(this));const{video:t}=this,{element:i}=t;t.preimplementsMediaSessionAPI()||i.classList.contains("i-amphtml-disable-mediasession")||(function(t,i){const n=dt(t);if(i&&i.artwork){const{artwork:t}=i;G(a(t)),t.forEach((t=>{if(t){const i=c(t)?t.src:t;K(n.isProtocolValid(i))}}))}}(i,this.ag),function(t,i,n,e){const{navigator:s}=t;"mediaSession"in s&&t.MediaMetadata&&(s.mediaSession.metadata=new t.MediaMetadata(Tt),s.mediaSession.metadata=new t.MediaMetadata(i),s.mediaSession.setActionHandler("play",n),s.mediaSession.setActionHandler("pause",e))}(this.xi.win,this.ag,this.lg,this.ug)),this.B_.beginSession(),this.Zi&&this.J_.beginSession(),this.rg||Ht(this,zt)}hg(){Ht(this,"video-pause"),this.gn=!1,this.sg?this.sg=!1:this.B_.endSession()}videoLoaded(){this.D_=!0,this.og=_t(this.video.element),this.gg(),this.H_().start(),this.Zi&&this.yg()}gg(){if(this.video.preimplementsMediaSessionAPI())return;this.video.getMetadata()&&(this.ag=d(this.video.getMetadata()));const t=this.xi.win.document;if(!this.ag.artwork||0==this.ag.artwork.length){const i=function(t){const i=t.querySelector('script[type="application/ld+json"]');if(!i)return;const n=p(i.textContent);return n&&n.image?"string"==typeof n.image?n.image:n.image["@list"]&&"string"==typeof n.image["@list"][0]?n.image["@list"][0]:"string"==typeof n.image.url?n.image.url:"string"==typeof n.image[0]?n.image[0]:void 0:void 0}(t)||function(t){const i=t.querySelector('meta[property="og:image"]');return i?i.getAttribute("content"):void 0}(t)||function(t){const i=t.querySelector('link[rel="shortcut icon"]')||t.querySelector('link[rel="icon"]');return i?i.getAttribute("href"):void 0}(t);i&&(this.ag.artwork=[{"src":i}])}if(!this.ag.title){const i=this.video.element.getAttribute("title")||this.video.element.getAttribute("aria-label")||this.og.getAttribute("title")||this.og.getAttribute("aria-label")||t.title;i&&(this.ag.title=i)}}Pg(){this.D_&&this.yg()}yg(){this.xi.isVisible()&&vt(this.xi.win).then((t=>{this.hasAutoplay&&!this.userInteracted()&&t?this.Ag():this.bg()}))}_g(){this.video.isInteractive()&&this.video.hideControls(),vt(this.xi.win).then((t=>{t||!this.video.isInteractive()?(this.video.mute(),this.wg()):this.video.showControls()}))}wg(){const{video:t}=this,{element:i,win:n}=this.video;if(i.hasAttribute("noaudio")||i.signals().get(Yt))return;const e=function(t,i){const n=M(i)(Et),e=n.firstElementChild;for(let t=0;t<4;t++){const i=e.cloneNode(!0),s=i.children;for(let i=0;i<s.length;i++)s[i].classList.add(`amp-video-eq-${t+1}-${i+1}`);n.appendChild(i)}return P(e),n}(0,i),s=[e];function o(i){t.mutateElementSkipRemeasure((()=>{s.forEach((t=>{!function(t,i){void 0===i&&(i=t.hasAttribute("hidden")),i?t.removeAttribute("hidden"):t.setAttribute("hidden","")}(t,i)}))}))}function r(i){t.mutateElementSkipRemeasure((()=>e.classList.toggle("amp-video-eq-play",i)))}const a=[At(i,Ct,(()=>r(!1))),At(i,St,(()=>r(!0))),At(i,$t,(()=>{o(!1),t.showControls()})),At(i,jt,(()=>{o(!0),t.hideControls()})),At(i,Ot,(()=>Dt(t)))];if(t.isInteractive()){t.hideControls();const n=function(t,i){const n=M(t)(Mt);return i&&i.title&&n.setAttribute("aria-label",i.title),n}(i,this.ag);s.push(n),a.push(At(n,"click",(()=>Dt(t))))}t.mutateElementSkipRemeasure((()=>{s.forEach((t=>{i.appendChild(t)}))})),this.N_&&o(!1),t.signals().whenSignal(Yt).then((()=>{this.mg(),t.isInteractive()&&t.showControls(),t.unmute(),a.forEach((t=>{t()})),t.mutateElementSkipRemeasure((()=>{s.forEach((t=>{P(t)}))}))}))}Ag(){this.W_&&(this.Zi?(this.J_.beginSession(),gt(this.video,!0),this.eg=!0):(this.gn&&this.J_.endSession(),this.video.pause(),this.sg=!0))}bg(){this.Zi?this.J_.beginSession():this.gn&&this.J_.endSession()}updateVisibility(t){const i=this.Zi;this.Zi=t,t!=i&&this.Pg()}getPlayingState(){return this.gn?this.gn&&this.eg&&!this.userInteracted()?"playing_auto":Ft:Ut}isRollingAd(){return this.N_}userInteracted(){return null!=this.video.signals().get(Yt)}getAnalyticsDetails(){const{video:t}=this;return Promise.all([vt(this.xi.win),pt(t.element)]).then((i=>{const n=i[0],e=i[1],{height:s,width:o}=e.boundingClientRect,r=this.hasAutoplay&&n,a=t.getPlayedRanges(),l=a.reduce(((t,i)=>t+i[1]-i[0]),0);return{"autoplay":r,"currentTime":t.getCurrentTime(),"duration":t.getDuration(),"height":s,"id":t.element.id,"muted":this.Z,"playedTotal":l,"playedRangesJson":JSON.stringify(a),"state":this.getPlayingState(),"width":o}}))}}(this,t);this.Hv.push(n);const{element:e}=n.video;A(e,Vt),function(t){t.classList.add("i-amphtml-media-component")}(e),t.signals().signal(Vt),e.classList.add("i-amphtml-video-interface")}L_(t){n("play",(()=>gt(t,!1))),n("pause",(()=>t.pause())),n("mute",(()=>t.mute())),n("unmute",(()=>t.unmute()));const i=()=>t.fullscreenEnter();function n(i,n){t.registerAction(i,(()=>{Dt(t),n()}),1)}n("fullscreenenter",i),n("fullscreen",i)}U_(t){if(Lt(this.Xv,t))return this.Xv;for(let i=0;this.Hv&&i<this.Hv.length;i++){const n=this.Hv[i];if(Lt(n,t))return this.Xv=n,n}return null}Y_(t){return G(this.U_(t))}registerForAutoFullscreen(t){this.__().register(t)}Mg(){return this.__()}getVideoStateProperty(t,i){const n=this.ampdoc.getRootNode(),e=H().assertElement(n.getElementById(t),`Could not find an element with id="${t}" for VIDEO_STATE`),o=this.Y_(e);return(o?o.getAnalyticsDetails():s()).then((t=>t?t[i]:""))}getPlayingState(t){return this.Y_(t).getPlayingState()}isMuted(t){return this.Y_(t).isMuted()}userInteracted(t){return this.Y_(t).userInteracted()}isRollingAd(t){return this.Y_(t).isRollingAd()}pauseOtherVideos(t){this.Hv.forEach((i=>{i.isPlaybackManaged()&&i!==t&&i.getPlayingState()==Ft&&i.video.pause()}))}})}(t,"video-manager")}var Gt=["<iframe frameborder=0 allowfullscreen></iframe>"];new Set(["c","v","a","ad"]);var Kt=["<img placeholder referrerpolicy=origin>"],Qt="amp-youtube",Xt=class extends t.BaseElement{constructor(t){super(t),this.Xg=null,this.kP=null,this.Z=!1,this.SP=!1,this.CP=!1,this.lv=null,this.fc=null,this.hP=null,this.av=null,this.fv=null,this.Hg=null,this.xP=null,this.bn=new class{constructor(t){this._n=t,this.gn=!1,this.Pn=!1,this.An=this.An.bind(this)}updatePlaying(t){t!==this.gn&&(this.gn=t,t?(this.Pn=!1,function(t,i){!function(t,i,n){const e=t.ownerDocument.defaultView;if(!e)return;let s=F.get(t);if(s||(s=[],F.set(t,s),z(e).observe(t)),!s.some((t=>t.callback===n&&1===t.type))){s.push({type:1,callback:n});const i=U.get(t);i&&setTimeout((()=>D(1,n,i)))}}(t,0,i)}(this._n,this.An)):function(t,i){!function(t,i,n){const e=F.get(t);if(e&&(function(t,i){const e=[];let s=0;for(let i=0;i<t.length;i++){const r=t[i];(o=r).callback===n&&1===o.type?e.push(r):(s<i&&(t[s]=r),s++)}var o;s<t.length&&(t.length=s)}(e),0==e.length)){F.delete(t),U.delete(t);const i=t.ownerDocument.defaultView;i&&z(i).unobserve(t)}}(t,0,i)}(this._n,this.An))}An({blockSize:t,inlineSize:i}){const n=i>0&&t>0;if(n===this.Pn)return;this.Pn=n;const e=this._n;n||e.pause()}}(this.element)}preconnectCallback(t){const i=Q(this.win,"preconnect"),n=this.getAmpDoc();i.url(n,this.cP()),i.url(n,"https://s.ytimg.com",t),i.url(n,"https://i.ytimg.com",t)}isLayoutSupported(t){return function(t){return"fixed"==t||"fixed-height"==t||"responsive"==t||"fill"==t||"flex-item"==t||"fluid"==t||"intrinsic"==t}(t)}renderOutsideViewport(){return.75}buildCallback(){this.Xg=this.qP(),this.kP=this.OP(),this.$P();const t=new o;this.av=t.promise,this.fv=t.resolve,Zt(this.element)}jP(){return this.$P(),`https://www.youtube${"omit"===this.FP()?"-nocookie":""}.com/embed/${this.Xg?`${encodeURIComponent(this.Xg||"")}?`:`live_stream?channel=${encodeURIComponent(this.kP||"")}&`}enablejsapi=1&amp=1`}cP(){if(this.hP)return this.hP;let t=this.jP();const{element:i}=this,n=function(t,i,n){const{dataset:e}=t,s={},o=/^param(.+)/;for(const t in e){const i=t.match(o);i&&(s[i[1][0].toLowerCase()+i[1].substr(1)]=e[t])}return s}(i);return"autoplay"in n&&(delete n.autoplay,this.user().error("AMP-YOUTUBE","Use autoplay attribute instead of data-param-autoplay")),"playsinline"in n||(n.playsinline="1"),i.hasAttribute("autoplay")&&("iv_load_policy"in n||(n.iv_load_policy="3"),n.playsinline="1"),"loop"in n&&this.user().warn("AMP-YOUTUBE","Use loop attribute instead of the deprecated data-param-loop"),this.SP=i.hasAttribute("loop")||"loop"in n&&"1"==n.loop,this.CP="playlist"in n,this.SP&&(this.CP?n.loop="1":"loop"in n&&delete n.loop),t=function(t,i){return function(t,i,n){if(!i)return t;const e=t.split("#",2),s=e[0].split("?",2);let o=s[0]+(s[1]?`?${s[1]}&${i}`:`?${i}`);return o+=e[1]?`#${e[1]}`:"",o}(t,function(t){const i=[];for(const s in t){let o=t[s];if(null!=o){o=l(o);for(let t=0;t<o.length;t++)i.push((n=s,e=o[t],`${encodeURIComponent(n)}=${encodeURIComponent(e)}`))}}var n,e;return i.join("&")}(i))}(t,n),this.hP=t}layoutCallback(){const t=function(t,i,n,e){const{element:s}=t,o=M(s)(Gt);return w(["referrerpolicy"],t.element,o),o.src=dt(s).assertHttpsUrl(i,s),b(o),s.appendChild(o),o}(this,this.cP());var i;t.title=this.element.title||"YouTube video",function(t){let i=t.getAttribute("allow")||"";i+="autoplay;",t.setAttribute("allow",i)}(t),this.lv=t,(i=this.element,X(i,"video-manager")).register(this),this.Hg=At(this.win,"message",this.UP.bind(this)),this.SP&&!this.CP&&(this.xP=At(this.element,xt,(t=>this.play(!1))));const n=this.loadPromise(this.lv).then((()=>ct(this.win).promise(300))).then((()=>{this.iA(),A(this.element,kt)}));return this.fv(n),n}unlayoutCallback(){this.lv&&(P(this.lv),this.lv=null),this.Hg&&this.Hg(),this.xP&&this.xP();const t=new o;return this.av=t.promise,this.fv=t.resolve,this.bn.updatePlaying(!1),!0}pauseCallback(){this.lv&&this.lv.contentWindow&&this.pause()}mutatedAttributesCallback(t){null!=t["data-videoid"]&&(this.Xg=this.qP(),this.lv&&this.dv("loadVideoById",[this.Xg]))}OP(){return this.element.getAttribute("data-live-channelid")}qP(){return this.element.getAttribute("data-videoid")}FP(){return this.element.getAttribute("credentials")||"include"}$P(){K(!(this.Xg&&this.kP)&&(this.Xg||this.kP),"Exactly one of data-videoid or data-live-channelid should be present for <amp-youtube> %s",this.element)}dv(t,i){this.av.then((()=>{if(this.lv&&this.lv.contentWindow){const n=JSON.stringify({"event":"command","func":t,"args":i||""});this.lv.contentWindow.postMessage(n,"*")}}))}UP(t){if(!function(t,i,n){return!(!i||t.source!=i.contentWindow)&&"https://www.youtube.com"==t.origin}(t,this.lv))return;const i=bt(t);if(!(n=i)||!c(n)&&!n.startsWith("{"))return;var n;const e=c(s=i)?s:p(s);var s;if(null==e)return;const o=e.event,r=e.info||{},{element:l}=this,h=r.playerState;if("infoDelivery"==o&&null!=h){switch(h){case 1:this.bn.updatePlaying(!0);break;case 2:case 0:this.bn.updatePlaying(!1)}return void function(t,i,n){if(null==n[i])return!1;const e=n[i];(a(e)?e:[e]).forEach((i=>{A(t,i)}))}(l,h.toString(),{1:St,2:Ct,0:[xt,Ct]})}const u=r.muted;if("infoDelivery"==o&&r&&null!=u){if(this.Z==u)return;return this.Z=u,void A(l,(d=this.Z,d?qt:Ot))}var d;if("initialDelivery"==o)return this.fc=r,void A(l,"loadedmetadata");"infoDelivery"!=o||void 0===r.currentTime||(this.fc.currentTime=r.currentTime)}iA(){this.lv&&this.lv.contentWindow.postMessage(JSON.stringify({"event":"listening"}),"*")}createPlaceholderCallback(){if(!this.Xg)return null;const{element:t}=this,i=M(t)(Kt),n=this.Xg;return O(i,{"object-fit":"cover","visibility":"hidden"}),w(["aria-label"],this.element,i),i.src=`https://i.ytimg.com/vi/${encodeURIComponent(n)}/sddefault.jpg#404_is_fine`,i.hasAttribute("aria-label")?i.setAttribute("alt","Loading video - "+i.getAttribute("aria-label")):i.setAttribute("alt","Loading video"),b(i),this.loadPromise(i).then((()=>{if(120==i.naturalWidth&&90==i.naturalHeight)throw new Error("sddefault.jpg is not found")})).catch((()=>(i.src=`https://i.ytimg.com/vi/${encodeURIComponent(n)}/hqdefault.jpg`,this.loadPromise(i)))).then((()=>{this.getVsync().mutate((()=>{O(i,{"visibility":""})}))})),i}supportsPlatform(){return!0}isInteractive(){return!0}play(t){this.dv("playVideo")}pause(){this.dv("pauseVideo")}mute(){this.dv("mute")}unmute(){this.dv("unMute")}showControls(){}hideControls(){}fullscreenEnter(){this.lv&&function(t){const i=t.requestFullscreen||t.requestFullScreen||t.webkitRequestFullscreen||t.webkitEnterFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen;i&&i.call(t)}(this.lv)}fullscreenExit(){this.lv&&function(t){const i=t.cancelFullScreen||t.exitFullscreen||t.webkitExitFullscreen||t.webkitCancelFullScreen||t.mozCancelFullScreen||t.msExitFullscreen;if(i)return void i.call(t);const{ownerDocument:n}=t;if(!n)return;const e=n.cancelFullScreen||n.exitFullscreen||n.webkitExitFullscreen||n.webkitCancelFullScreen||n.mozCancelFullScreen||n.msExitFullscreen;e&&e.call(n)}(this.lv)}isFullscreen(){return!!this.lv&&function(t){const{webkitDisplayingFullscreen:i}=t;if(void 0!==i)return i;const{ownerDocument:n}=t;return!!n&&(n.fullscreenElement||n.webkitFullscreenElement||n.mozFullScreenElement||n.webkitCurrentFullScreenElement)==t}(this.lv)}getMetadata(){}preimplementsMediaSessionAPI(){return!0}preimplementsAutoFullscreen(){return!1}getCurrentTime(){return this.fc?this.fc.currentTime:NaN}getDuration(){return this.fc?this.fc.duration:NaN}getPlayedRanges(){return[]}seekTo(t){this.user().error(Qt,"`seekTo` not supported.")}};t.registerElement(Qt,Xt)})();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-youtube-0.1.mjs.map